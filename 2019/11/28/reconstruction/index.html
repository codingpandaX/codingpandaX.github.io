<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 阅读：《重构：改善既有代码的设计》- 坏代码的味道 · 编程熊猫</title><meta name="description" content="阅读：《重构：改善既有代码的设计》- 坏代码的味道 - 编程熊猫"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://codingpandax.github.io/atom.xml" title="编程熊猫"><meta name="generator" content="Hexo 4.0.0"><link rel="alternate" href="/atom.xml" title="编程熊猫" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/codingpandaX" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">阅读：《重构：改善既有代码的设计》- 坏代码的味道</h1><div class="post-info">Nov 28, 2019</div><div class="post-content"><h5 id="Duplicated-Code-（重复代码）"><a href="#Duplicated-Code-（重复代码）" class="headerlink" title="Duplicated Code （重复代码）"></a>Duplicated Code （重复代码）</h5><blockquote>
<p>两个地方有相同的代码段</p>
</blockquote>
<h5 id="Long-Method-过长函数"><a href="#Long-Method-过长函数" class="headerlink" title="Long Method (过长函数)"></a>Long Method (过长函数)</h5><blockquote>
<p>解释能力、共享能力、选择能力等都是小型函数支持的<br>函数越长越难理解</p>
</blockquote>
<h5 id="Large-Class-过大的类"><a href="#Large-Class-过大的类" class="headerlink" title="Large Class (过大的类)"></a>Large Class (过大的类)</h5><blockquote>
<p>一个类中有太多的代码，重复、混乱最终会走向死亡</p>
</blockquote>
<h5 id="Long-Parameter-List-过多参数"><a href="#Long-Parameter-List-过多参数" class="headerlink" title="Long  Parameter List (过多参数)"></a>Long  Parameter List (过多参数)</h5><blockquote>
<p>太多的参数令人难以理解</p>
</blockquote>
<h5 id="Divergent-Change-发散式变化"><a href="#Divergent-Change-发散式变化" class="headerlink" title="Divergent Change (发散式变化)"></a>Divergent Change (发散式变化)</h5><blockquote>
<p>某一外界变化，导致多处修改</p>
</blockquote>
<h5 id="Shotgun-Surgery-霰弹式修改"><a href="#Shotgun-Surgery-霰弹式修改" class="headerlink" title="Shotgun Surgery (霰弹式修改)"></a>Shotgun Surgery (霰弹式修改)</h5><blockquote>
<p>遇到变化，需要修改的代码散布4处，不断难找到它们，也容易忘记某个修改</p>
</blockquote>
<h5 id="Feature-Envy-依恋情结"><a href="#Feature-Envy-依恋情结" class="headerlink" title="Feature Envy(依恋情结)"></a>Feature Envy(依恋情结)</h5><blockquote>
<p>某个函数处理业务，过多以来外部函数（或工具类）</p>
</blockquote>
<h5 id="Data-Clumps-数据泥团"><a href="#Data-Clumps-数据泥团" class="headerlink" title="Data Clumps (数据泥团)"></a>Data Clumps (数据泥团)</h5><blockquote>
<p>两个类中有相同的字段，函数中有相同的参数<br>这些数据以字段出现的地方，应该提炼成一个对象</p>
</blockquote>
<h5 id="Primitive-Obsession-基本类型偏执"><a href="#Primitive-Obsession-基本类型偏执" class="headerlink" title="Primitive Obsession (基本类型偏执)"></a>Primitive Obsession (基本类型偏执)</h5><blockquote>
<p>运用小对象 Replace value with object</p>
</blockquote>
<h5 id="Switch-Staments-Switch-惊悚现身"><a href="#Switch-Staments-Switch-惊悚现身" class="headerlink" title="Switch Staments (Switch 惊悚现身)"></a>Switch Staments (Switch 惊悚现身)</h5><blockquote>
<p>少用 Switch case 语句，用多态替换</p>
</blockquote>
<h5 id="Parallel-Inheritance-Hierarchies-平行继承"><a href="#Parallel-Inheritance-Hierarchies-平行继承" class="headerlink" title="Parallel Inheritance Hierarchies (平行继承)"></a>Parallel Inheritance Hierarchies (平行继承)</h5><blockquote>
<p>为某个类增加一个子类，必须也为另一个类增加子类</p>
</blockquote>
<h5 id="Lazy-Class-冗余类"><a href="#Lazy-Class-冗余类" class="headerlink" title="Lazy Class (冗余类)"></a>Lazy Class (冗余类)</h5><blockquote>
<p>如无必要，无增实体，每增加一个类都需要人去 理解、维护，这些都是开销</p>
</blockquote>
<h5 id="Speculative-Generality（夸夸其谈未来性）"><a href="#Speculative-Generality（夸夸其谈未来性）" class="headerlink" title="Speculative Generality（夸夸其谈未来性）"></a>Speculative Generality（夸夸其谈未来性）</h5><blockquote>
<p>增加系统理解和维护难度，如果会被用到，则值得，如果不用，则不值得。<br>未来性功能预留，要适度</p>
</blockquote>
<h5 id="Temporary-Field-令人迷惑的暂时字段"><a href="#Temporary-Field-令人迷惑的暂时字段" class="headerlink" title="Temporary Field (令人迷惑的暂时字段)"></a>Temporary Field (令人迷惑的暂时字段)</h5><blockquote>
<p>含义相近，或者临时字段，或者语义不明确</p>
</blockquote>
<h5 id="Message-Chains-过度耦合的消息链"><a href="#Message-Chains-过度耦合的消息链" class="headerlink" title="Message Chains (过度耦合的消息链)"></a>Message Chains (过度耦合的消息链)</h5><blockquote>
<p>A-&gt;B-&gt;C-&gt;…..</p>
</blockquote>
<h5 id="Middle-Man-中间人"><a href="#Middle-Man-中间人" class="headerlink" title="Middle Man(中间人)"></a>Middle Man(中间人)</h5><blockquote>
<p>对象的基本特征之一就是封装，封装如果使用外部数据可能就会用到委托/&gt;代理，代理不宜过多</p>
</blockquote>
<h5 id="Inappropriate-Intimacy-亲密关系"><a href="#Inappropriate-Intimacy-亲密关系" class="headerlink" title="Inappropriate Intimacy (亲密关系)"></a>Inappropriate Intimacy (亲密关系)</h5><blockquote>
<p>两个类有过多的耦合</p>
</blockquote>
<h5 id="Alternative-Class-with-Different-Interfaces-异曲同工的类"><a href="#Alternative-Class-with-Different-Interfaces-异曲同工的类" class="headerlink" title="Alternative Class with Different Interfaces(异曲同工的类)"></a>Alternative Class with Different Interfaces(异曲同工的类)</h5><blockquote>
<p>两个函数做同一件事情（例如工具类冗余）</p>
</blockquote>
<h5 id="Incomplete-Library-Class（不完美的库类）"><a href="#Incomplete-Library-Class（不完美的库类）" class="headerlink" title="Incomplete Library Class（不完美的库类）"></a>Incomplete Library Class（不完美的库类）</h5><blockquote>
<p>系统库设计之初，不可能考虑到所有的场景</p>
</blockquote>
<h5 id="Data-Class"><a href="#Data-Class" class="headerlink" title="Data Class"></a>Data Class</h5><blockquote>
<p>数据容器要恰当的封装</p>
</blockquote>
<h5 id="Refused-Bequest-被拒绝的遗赠"><a href="#Refused-Bequest-被拒绝的遗赠" class="headerlink" title="Refused Bequest  (被拒绝的遗赠)"></a>Refused Bequest  (被拒绝的遗赠)</h5><blockquote>
<p>子类继承父类，却有部分用不到的方法或属性，说明继承体系设计错误，应该抽出一个兄弟类<br>杜绝继承乱用</p>
</blockquote>
<h5 id="Comments-（过多的注释）"><a href="#Comments-（过多的注释）" class="headerlink" title="Comments （过多的注释）"></a>Comments （过多的注释）</h5><blockquote>
<p>注释不是不好<br>有时候人们把注释当作除臭剂</p>
</blockquote>
</div></article></div></main><footer><div class="paginator"><a href="/2019/11/22/Hello-World/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'codingpandax';
var disqus_identifier = '2019/11/28/reconstruction/';
var disqus_title = '阅读：《重构：改善既有代码的设计》- 坏代码的味道';
var disqus_url = 'https://codingpandax.github.io/2019/11/28/reconstruction/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//codingpandax.disqus.com/count.js" async></script><div class="copyright"><p>© 2019 <a href="https://codingpandax.github.io">编程熊猫</a>,  powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>